<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="devock.cpms.member.service.impl.MemberMapper">
	
	<select id="selectMember4Login" parameterType="loginVO" resultType="userVO" >
        SELECT USERNO, USERID, USERNM, USERROLE
          FROM COM_USER CU
         WHERE CU.DELETEFLAG='N' 
           AND CU.USERID = #{userid} AND USERPW=SHA2(#{userpw}, 256)
    </select> 
    
    <insert id="insertLogIn" parameterType="String">
    	INSERT INTO COM_LOGINOUT (USERNO, LTYPE, LDATE)
    	 	              VALUES (#{userno}, 'I', NOW() );
    </insert>

    <insert id="insertLogOut" parameterType="String">
    	INSERT INTO COM_LOGINOUT (USERNO, LTYPE, LDATE)
    	 	              VALUES (#{userno}, 'O', NOW() );
    </insert>
	
</mapper>


